<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<title>Test Page</title>
<script type="text/javascript" src="../libs/knockout-2.2.1.js"></script>
<script type="text/javascript" src="../libs/d3.v3.min.js"></script>
<script type="text/javascript" src="../tools.js"></script>
<script type="text/javascript" src="../charting.js"></script>
<script type="text/javascript" src="../kotools.js"></script>
<script>

var testOptions = { legend: true, width:300, height:150}

</script>
</head>
<body>

 <div class="container-fluid">
    <div class="row-fluid">
        
		<div id="stackedChart" data-bind="stackedbarchart: carSales">
		
		<div>
		
		<!--<div id="carsChart" data-bind="piechart: cars, transformation:transformToChart, chartOptions:testOptions">

        </div>-->
		
    </div>
</div>
</body>

<script>
var carSales = [ 
	{
		x:'january',
		peugot: '100',
		audit: '200',
		bmw:'300'
	},
	{
		x:'february',
		peugot: '50',
		audit: '110',
		bmw:'80'
	},
	{
		x:'marz',
		peugot: '120',
		audit: '230',
		bmw:'115'
	}
]

function CarViewModel(data) {
	self = this;
	self.sales = ko.observableArray([]);
	self.name = ko.observable();
	
	self.totalSales = ko.computed(function(x) {
		return sum(self.sales());
	},self);
	
	if(data!=null){
		self.sales(data.sales);
		self.name(data.name);
	}
}

function CarSalesViewModel (data){
	self.carSales = ko.observableArray([]);
		
	self.carSales(data);
}

function transformToChart(car){
	return { x: car.name(), y: car.totalSales()};
}

var vm = new CarSalesViewModel(carSales);

ko.applyBindings(vm);

</script>

</html>